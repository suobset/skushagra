<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Metamorphosis | My New Hugo Site</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="
pub fn assembly() {
unsafe {
asm!(
// paste the assembly code here
);
}
}


User code below serving as helper functions to print
.LBB0_1_message:
.asciz	&ldquo;jmp .LBB0_1\n&rdquo;
.LBB0_7_message:
.asciz	&ldquo;jmp .LBB0_7\n&rdquo;
.No_jmp_message:
.asciz	&ldquo;No Jmp\n&rdquo;


# Load the address of the message string onto %rdi
lea     .LBB0_1_message(%rip), %rdi

# Call printf
call    printf

# Restore the values of %rip and %rdi from the stack
popq    %rdi
popq    %rip
# Save the values of %rip and %rdi onto the stack
pushq   %rip
pushq   %rdi

.LBB0_1_message:
.asciz	&ldquo;jmp .LBB0_1\n&rdquo;
">
    <meta name="generator" content="Hugo 0.153.0">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    


    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/2024-03-11-metamorphosis/">
    

    
    
    <meta property="og:url" content="http://localhost:1313/posts/2024-03-11-metamorphosis/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="Metamorphosis">
  <meta property="og:description" content="pub fn assembly() { unsafe { asm!( // paste the assembly code here ); } } User code below serving as helper functions to print .LBB0_1_message: .asciz	“jmp .LBB0_1\n” .LBB0_7_message: .asciz	“jmp .LBB0_7\n” .No_jmp_message: .asciz	“No Jmp\n” # Load the address of the message string onto %rdi lea .LBB0_1_message(%rip), %rdi # Call printf call printf # Restore the values of %rip and %rdi from the stack popq %rdi popq %rip # Save the values of %rip and %rdi onto the stack pushq %rip pushq %rdi .LBB0_1_message: .asciz	“jmp .LBB0_1\n”">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-11T00:42:00+00:00">
    <meta property="article:modified_time" content="2024-03-11T00:42:00+00:00">
    <meta property="article:tag" content="Open Source">
    <meta property="article:tag" content="Personal">
    <meta property="article:tag" content="Life">
    <meta property="article:tag" content="Academia">

  <meta itemprop="name" content="Metamorphosis">
  <meta itemprop="description" content="pub fn assembly() { unsafe { asm!( // paste the assembly code here ); } } User code below serving as helper functions to print .LBB0_1_message: .asciz	“jmp .LBB0_1\n” .LBB0_7_message: .asciz	“jmp .LBB0_7\n” .No_jmp_message: .asciz	“No Jmp\n” # Load the address of the message string onto %rdi lea .LBB0_1_message(%rip), %rdi # Call printf call printf # Restore the values of %rip and %rdi from the stack popq %rdi popq %rip # Save the values of %rip and %rdi onto the stack pushq %rip pushq %rdi .LBB0_1_message: .asciz	“jmp .LBB0_1\n”">
  <meta itemprop="datePublished" content="2024-03-11T00:42:00+00:00">
  <meta itemprop="dateModified" content="2024-03-11T00:42:00+00:00">
  <meta itemprop="wordCount" content="258">
  <meta itemprop="keywords" content="Open Source,Personal,Life,Academia">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Metamorphosis">
  <meta name="twitter:description" content="pub fn assembly() { unsafe { asm!( // paste the assembly code here ); } } User code below serving as helper functions to print .LBB0_1_message: .asciz	“jmp .LBB0_1\n” .LBB0_7_message: .asciz	“jmp .LBB0_7\n” .No_jmp_message: .asciz	“No Jmp\n” # Load the address of the message string onto %rdi lea .LBB0_1_message(%rip), %rdi # Call printf call printf # Restore the values of %rip and %rdi from the stack popq %rdi popq %rip # Save the values of %rip and %rdi onto the stack pushq %rip pushq %rdi .LBB0_1_message: .asciz	“jmp .LBB0_1\n”">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        My New Hugo Site
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l mw7 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Metamorphosis</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-03-11T00:42:00Z">March 11, 2024</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-100-l"><!-- raw HTML omitted -->
<p>pub fn assembly() {
unsafe {
asm!(
// paste the assembly code here
);
}
}
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h1 id="user-code-below-serving-as-helper-functions-to-print">User code below serving as helper functions to print</h1>
<p>.LBB0_1_message:
.asciz	&ldquo;jmp .LBB0_1\n&rdquo;
.LBB0_7_message:
.asciz	&ldquo;jmp .LBB0_7\n&rdquo;
.No_jmp_message:
.asciz	&ldquo;No Jmp\n&rdquo;
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<pre><code># Load the address of the message string onto %rdi
lea     .LBB0_1_message(%rip), %rdi

# Call printf
call    printf

# Restore the values of %rip and %rdi from the stack
popq    %rdi
popq    %rip
# Save the values of %rip and %rdi onto the stack
pushq   %rip
pushq   %rdi
</code></pre>
<p>.LBB0_1_message:
.asciz	&ldquo;jmp .LBB0_1\n&rdquo;
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h1 id="define-the-file-path-where-you-want-to-save-the-log">Define the file path where you want to save the log</h1>
<p>log_file_path = &ldquo;./gdb.trace&rdquo;</p>
<h1 id="initialize-a-flag-to-track-whether-a-jne-or-jge-instruction-was-executed">Initialize a flag to track whether a &lsquo;jne&rsquo; or &lsquo;jge&rsquo; instruction was executed</h1>
<p>jmp_detected = False</p>
<p>def log_jmp_event(event):
global jmp_detected  # Use the global flag to track if &lsquo;jne&rsquo; or &lsquo;jge&rsquo; was detected
pc = int(gdb.parse_and_eval(&quot;$pc&quot;))
instruction = gdb.execute(&ldquo;x/i &quot; + hex(pc), to_string=True)</p>
<pre><code>if &quot;jne&quot; in instruction or &quot;jge&quot; in instruction:
    jmp_detected = True
    with open(log_file_path, &quot;a&quot;) as log_file:
        log_file.write(f&quot;{hex(pc)}: {instruction}\n&quot;)
</code></pre>
<h1 id="connect-the-stop-event-to-the-log_jmp_event-function">Connect the stop event to the log_jmp_event function</h1>
<p>gdb.events.stop.connect(log_jmp_event)</p>
<h1 id="define-a-command-to-check-if-jne-or-jge-was-executed-and-write-to-the-log-file">Define a command to check if &lsquo;jne&rsquo; or &lsquo;jge&rsquo; was executed and write to the log file</h1>
<p>class CheckJmpCommand(gdb.Command):
def <strong>init</strong>(self):
super(CheckJmpCommand, self).<strong>init</strong>(&ldquo;checkjmp&rdquo;, gdb.COMMAND_USER)</p>
<pre><code>def invoke(self, arg, from_tty):
    global jmp_detected
    with open(log_file_path, &quot;a&quot;) as log_file:
        if jmp_detected:
            log_file.write(&quot;jne/jge was executed.\n&quot;)
        else:
            log_file.write(&quot;jne/jge was NOT executed.\n&quot;)
    jmp_detected = False  # Reset the flag for the next check
</code></pre>
<p>CheckJmpCommand()
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>0x40128b: =&gt; 0x40128b &lt;list_directory+107&gt;:	jne    0x40125b &lt;list_directory+59&gt;</p>
<p>0x40128b: =&gt; 0x40128b &lt;list_directory+107&gt;:	jne    0x40125b &lt;list_directory+59&gt;</p>
<p>0x7ffff7fdc895: =&gt; 0x7ffff7fdc895 &lt;_dl_fixup+117&gt;:	jne    0x7ffff7fdca9c &lt;_dl_fixup+636&gt;</p>
<p>0x7ffff7fdc89f: =&gt; 0x7ffff7fdc89f &lt;_dl_fixup+127&gt;:	jne    0x7ffff7fdca70 &lt;_dl_fixup+592&gt;
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/open-source/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Open Source</a>
   </li>
  
   <li class="list di">
     <a href="/tags/personal/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Personal</a>
   </li>
  
   <li class="list di">
     <a href="/tags/life/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Life</a>
   </li>
  
   <li class="list di">
     <a href="/tags/academia/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Academia</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div></article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="http://localhost:1313/" >
    &copy;  My New Hugo Site 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
